/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{290:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(291);const o=new r.a,c={name:"SliceSimulator",props:{state:{type:[Function,Object],required:!0},zIndex:{type:Number,default:Object(r.g)().zIndex,required:!1},background:{type:String,default:Object(r.g)().background,required:!1}},data:()=>({coreManager:o,managedState:Object(r.e)(),slices:Object(r.h)(),message:Object(r.f)()}),mounted(){this.coreManager.stateManager.on(r.b.ManagedState,(e=>{this.managedState=e}),"simulator-managed-state"),this.coreManager.stateManager.on(r.b.Slices,(e=>{this.slices=e}),"simulator-slices"),this.coreManager.stateManager.on(r.b.Message,(e=>{this.message=e}),"simulator-message"),this.coreManager.init(this.state)},watch:{state(){this.coreManager.stateManager.reload(this.state)}},destroyed(){this.coreManager.stateManager.off(r.b.ManagedState,"simulator-managed-state"),this.coreManager.stateManager.off(r.b.Slices,"simulator-slices"),this.coreManager.stateManager.off(r.b.Message,"simulator-message")},render(e){const t=[];return this.message?t.push(e("article",{domProps:{innerHTML:this.message}})):this.slices.length&&this.$scopedSlots.default&&t.push(e("div",{attrs:{id:"root"},class:r.k,style:this.managedState.status!==r.c.Loaded?{display:"none"}:void 0,on:{"!click":r.i,"!submit":r.d}},[this.$scopedSlots.default({slices:this.slices})])),e("div",{class:r.j,style:{zIndex:this.zIndex,position:"fixed",top:0,left:0,width:"100%",height:"100vh",overflow:"auto",background:this.background}},t)}}},291:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return M})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return D})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return v})),n.d(t,"g",(function(){return h})),n.d(t,"h",(function(){return _})),n.d(t,"i",(function(){return R})),n.d(t,"j",(function(){return m})),n.d(t,"k",(function(){return y}));var r=n(292),o=n(298);const c=o.d(o.e,o.b([o.c({name:o.e}),o.f({components:o.d(o.e,o.b([o.f({id:o.e,model:o.b([o.f({id:o.e,variations:o.a(o.b([o.f({id:o.e}),o.c({name:o.e})]))}),o.c({name:o.e})]),mocks:o.d(o.e,o.f({variation:o.e}))}),o.c({name:o.e})]))})]));var l=(e=>(e.ManagedState="managedState",e.Slices="slices",e.ActiveSlice="activeSlice",e.Message="message",e))(l||{}),d=(e=>(e.Pending="pending",e.Loaded="loaded",e.Error="error",e))(d||{});const h=()=>({zIndex:100,background:"#ffffff"}),f=()=>({data:null,status:d.Pending,error:null}),_=()=>[],v=()=>"",m="slice-simulator",y="slice-simulator--root",w=e=>{let t=document.querySelector(`.${m} [data-slice-zone]`);if(t)return t.children.length!==e&&console.warn(`Flagged SliceZone has an unexpected number of children, found ${t.children.length} but expected ${e}. This might lead to unexpected behaviors. Are you sure you tagged the right element?`),t;if(t=document.querySelector(`.${m} .${y}`),!t)return null;for(let i=0;i<5;i++){if(t.children.length===e)return t;if(!t.children.length)break;t=t.children[0]}return null},a=(e,label)=>`<a href="${e}" style="text-decoration: underline;">${label||e}<a>`,S=`<div style="word-spacing: initial; white-space: pre; line-height: initial; font-family: monospace; color: #ffffff; mix-blend-mode: difference; padding: 1rem; font-size: 1rem;">${["   _____ ___          _____ _                 __      __            \n  / ___// (_)_______ / ___/(_)___ ___  __  __/ /___ _/ /_____  _____\n  \\__ \\/ / / ___/ _ \\\\__ \\/ / __ `__ \\/ / / / / __ `/ __/ __ \\/ ___/\n ___/ / / / /__/  __/__/ / / / / / / / /_/ / / /_/ / /_/ /_/ / /    \n/____/_/_/\\___/\\___/____/_/_/ /_/ /_/\\__,_/_/\\__,_/\\__/\\____/_/     \n                  / /_  __  __   / __ \\_____(_)________ ___  (_)____\n                 / __ \\/ / / /  / /_/ / ___/ / ___/ __ `__ \\/ / ___/\n                / /_/ / /_/ /  / ____/ /  / (__  ) / / / / / / /__  \n               /_.___/\\__, /  /_/   /_/  /_/____/_/ /_/ /_/_/\\___/  \n                     /____/\n\n",`You're seeing this page because you're accessing Slice Simulator\ndirectly, e.g:\n\n  - ${a("http://localhost:3000/slice-simulator")}\n\n\n\nSlice Simulator is not meant to be accessed this way, to preview your\nslices, head over to Slice Machine UI:\n\n  - ${a("http://localhost:9999")}\n\n\n\nIf you believe this is an error, please reach out to us:\n\n  - ${a("https://github.com/prismicio/slice-machine/issues/new/choose")}`,"\n\n\n\n\n\n                                                - The Prismic team"].join("")}</div>`;const I=(e,t=16)=>{let n=0,r=null;return function(...o){const c=Date.now(),l=c-n;l>=t?(e.apply(this,o),n=c):(r&&clearTimeout(r),r=setTimeout((()=>{e.apply(this,o),n=Date.now()}),t-l))}};void 0===e&&(globalThis.process={env:{}});class T extends class{constructor(){this._listeners={}}on(e,t,n=null){var r;this._listeners[e]=[...null!=(r=this._listeners[e])?r:[],[t,n]]}off(e,t){var n;this._listeners[e]=(null!=(n=this._listeners[e])?n:[]).filter((([e,n])=>"function"==typeof t?e!==t:n!==t))}emit(e,t){var n;(null!=(n=this._listeners[e])?n:[]).forEach((e=>e[0](t)))}}{constructor(e=f(),t=_()){super(),this._setActiveSlice=()=>{if(0===this.slices.length)return void(this.activeSlice=null);const e=w(this.slices.length);if(!e)return void(this.activeSlice=null);const t=((e,t)=>{const n=document.elementsFromPoint(t.x,t.y).reverse(),r=n.indexOf(e);if(-1===r)return null;return n[r+1]||null})(e,this._mouse);if(!t)return void(this.activeSlice=null);const n=Array.prototype.indexOf.call(e.children,t);this.activeSlice={rect:t.getBoundingClientRect(),sliceID:this.slices[n].slice_type,variationID:this.slices[n].variation,index:n}},this.setActiveSlice=I(this._setActiveSlice,16),this._setSliceZoneFromSliceIDsLastCall=null,this._managedState=e,this._slices=t,this._activeSlice=null,this._message="",this._mouse={x:0,y:0}}set managedState(e){this._managedState=e,this.emit(l.ManagedState,e)}get managedState(){return this._managedState}set slices(e){this._slices=e,this.message="",this.emit(l.Slices,e)}get slices(){return this._slices}set activeSlice(e){this._activeSlice=e,this.emit(l.ActiveSlice,e)}get activeSlice(){return this._activeSlice}set message(e){this._message=e,this.emit(l.Message,e)}get message(){return this._message}async init(e){this._managedState=await this.load(e),await this.forceSliceChunksDownload(),this.setDefaultSliceZone(),this.emit(l.ManagedState,this._managedState),window.addEventListener("mousemove",(e=>{this._mouse={x:e.clientX,y:e.clientY}}))}async load(e){try{const t=await("function"==typeof e?e():e),n=c.decode(t);if("Left"===n._tag)throw console.error(n.left),new Error("State does not validate expected format, see console logs for detailed report");return{data:n.right,status:d.Loaded,error:null}}catch(e){return console.error(e),{data:null,status:d.Error,error:e}}}async reload(e){this.managedState=await this.load(e),this.recoverSliceZone()}_throwIfNotLoaded(e){var t;if(this.managedState.status===d.Error)throw null!=(t=this.managedState.error)?t:new Error("Unknown state error, see console logs for detailed report");if(this.managedState.status===d.Pending||!this.managedState.data)throw new Error(`\`StateManager.${e}()\` can only be called when the state is loaded, use \`StateManager.load()\` first`)}getLibraries(){return this._throwIfNotLoaded("getLibraries"),Object.entries(this.managedState.data).map((([e,t])=>{const n=t.components;return{path:e,slices:Object.values(n).map((e=>({id:e.id,name:e.name||e.id,variations:e.model.variations.map((e=>({id:e.id,name:e.name||e.id})))})))}}))}getMocks(){return this._throwIfNotLoaded("getMocks"),Object.values(this.managedState.data).reduce(((e,t)=>{const n=t.components;return Object.values(n).forEach((t=>{e[t.id]=Object.values(t.mocks).reduce(((e,t)=>(e[t.variation]=t,e)),{})})),e}),{})}async forceSliceChunksDownload(){this.setSliceZoneFromSliceIDs(this.getLibraries().map((e=>e.slices.map((e=>({sliceID:e.id,variationID:e.variations[0].id}))))).flat()),await new Promise((e=>setTimeout(e,0))),this.slices=[]}setDefaultSliceZone(){if(this._throwIfNotLoaded("setDefaultSliceZone"),"undefined"!=typeof window){const e=new URL(window.location.href);e.searchParams.has("sid")&&e.searchParams.has("vid")&&this.setSliceZoneFromSliceIDs([{sliceID:e.searchParams.get("sid"),variationID:e.searchParams.get("vid")}])}}recoverSliceZone(){this._setSliceZoneFromSliceIDsLastCall&&this.setSliceZoneFromSliceIDs(this._setSliceZoneFromSliceIDsLastCall)}setSliceZone(e){this._setSliceZoneFromSliceIDsLastCall=null,this.slices=e}setSliceZoneFromSliceIDs(e){this._setSliceZoneFromSliceIDsLastCall=e;const t=this.getMocks();this.slices=e.map((e=>{const n=e.sliceID,r=e.variationID;if(n in t&&r in t[n])return t[n][r]})).filter(Boolean)}}class M{constructor(e=f(),t=_()){this.stateManager=new T(e,t),this._api=null}async init(e){if(this.stateManager.managedState.status!==d.Loaded){await this.stateManager.init(e);try{await this._initAPI()}catch(e){return e instanceof Error&&"Receiver is currently not embedded as an iframe"===e.message&&!this.stateManager.slices.length&&(this.stateManager.message=S),void console.error(e)}this._initListeners()}else await this.stateManager.reload(e)}async _initAPI(){this._api=new r.c({[r.a.GetLibraries]:(e,t)=>t.success(this.stateManager.getLibraries()),[r.a.SetSliceZone]:(e,t)=>(this.stateManager.setSliceZone(e.data),t.success()),[r.a.SetSliceZoneFromSliceIDs]:(e,t)=>(this.stateManager.setSliceZoneFromSliceIDs(e.data),t.success()),[r.a.ScrollToSlice]:(e,t)=>{var n;if(e.data.sliceIndex<0)return t.error("`sliceIndex` must be > 0",400);if(e.data.sliceIndex>=this.stateManager.slices.length)return t.error(`\`sliceIndex\` must be < ${this.stateManager.slices.length} (\`<SliceZone />\` current length)`,400);const r=w(this.stateManager.slices.length);if(!r)return t.error("Failed to find `<SliceZone />`",500);this.stateManager.activeSlice=null;const o=r.children[e.data.sliceIndex];return o?(o.scrollIntoView({behavior:e.data.behavior,block:e.data.block,inline:e.data.inline}),(null==(n=this._api)?void 0:n.options.activeSliceAPI)&&setTimeout(this.stateManager.setActiveSlice,750),t.success()):t.error("Failed fo find slice at index $`{req.data.sliceIndex}` in `<SliceZone />`",500)}}),await this._api.ready()}_initListeners(){window.addEventListener("mousemove",(()=>{var e;(null==(e=this._api)?void 0:e.options.activeSliceAPI)&&this.stateManager.setActiveSlice()})),window.addEventListener("resize",(()=>{var e;(null==(e=this._api)?void 0:e.options.activeSliceAPI)&&this.stateManager.setActiveSlice()})),window.addEventListener("mousewheel",(()=>{var e;(null==(e=this._api)?void 0:e.options.activeSliceAPI)&&setTimeout(this.stateManager.setActiveSlice,200)})),this.stateManager.on(l.Slices,(()=>{var e;(null==(e=this._api)?void 0:e.options.activeSliceAPI)&&this.stateManager.setActiveSlice()})),this.stateManager.on(l.ActiveSlice,(async e=>{if(this._api)try{await this._api.setActiveSlice(e)}catch(e){if(!(e instanceof r.b&&400===e.response.status))throw e;console.error(e.response)}}))}}const D=e=>{e.preventDefault(),e.stopPropagation()},R=e=>{e.path&&e.path.slice(0,5).some((e=>e instanceof HTMLAnchorElement))&&(e.preventDefault(),e.stopPropagation())}}).call(this,n(133))},292:function(e,t,n){"use strict";n.d(t,"a",(function(){return A})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return L}));var r=n(293),o=n.n(r);let c=0;const l=(e,data,t=200)=>{var n,r;if(t>=400)throw new TypeError(`Invalid success status code, expected status to be within \`[100;400[\`, got \`${t}\``);return{requestID:e,status:t,msg:null!=(r=null==(n=o.a.message[t])?void 0:n.replace(/\.$/,"").toLowerCase())?r:"",data:data}},d=(e,t,n=400)=>{var r,c;if(n<400)throw new TypeError(`Invalid error status code, expected status to be within \`[500;600[\`, got \`${n}\``);return{requestID:e,status:n,msg:null!=(c=null==(r=o.a.message[n])?void 0:r.replace(/\.$/,"").toLowerCase())?c:"",error:t}},h=e=>{if("object"!=typeof e||null===e)throw new TypeError(`Invalid message received, expected message to be of type \`object\`, got \`${typeof e}\``);if(!Object.keys(e).every((e=>["requestID","type","data","status","msg","error"].includes(e))))throw new TypeError(`Invalid message received: ${JSON.stringify(e)}`);if("string"!=typeof e.requestID)throw new TypeError(`Invalid message received, expected \`message.requestID\` to be of type \`string\`, got \`${typeof e.id}\``);return e},f=e=>"type"in e,_=e=>!("type"in e);class v extends Error{constructor(e){super(e.msg),this.response=e}}Error;class m extends Error{constructor(e){super("Too many concurrent requests"),this.request=e}}class y extends Error{constructor(e){super(`Request \`${e.requestID}\` timed out`),this.request=e}}class w extends Error{}class S extends Error{constructor(){super("Port is not set")}}Error;const I={debug:!1,maximumRequestConcurrency:20,defaultTimeout:5e3,requestIDPrefix:"channel-"};class T{constructor(e,t){this._port=null,this._pendingRequests=new Map,this.requestHandlers=e,this.options={...I,...t}}get port(){if(!this._port)throw new S;return this._port}set port(e){this._port&&(this._port.onmessage=null),this._port=e,this._port&&(this._port.onmessage=this.onMessage.bind(this))}createRequestMessage(e,data){return((e,data,t="")=>({requestID:`${t}${c++}`,type:e,data:data}))(e,data,this.options.requestIDPrefix)}async onMessage(e){this.options.debug&&console.debug(e.data);try{const t=h(e.data);if(f(t))if(this.requestHandlers[t.type])try{const e=await this.requestHandlers[t.type](t,{success:l.bind(this,t.requestID),error:d.bind(this,t.requestID)});this.postResponse(e)}catch(e){this.postResponse(d(t.requestID,e,500))}else this.postResponse(d(t.requestID,void 0,501));else this._pendingRequests.has(t.requestID)?(this._pendingRequests.get(t.requestID)(t),this._pendingRequests.delete(t.requestID)):console.error(`Unknown request ID received in response: ${JSON.stringify(t)}`)}catch(e){if(!(e instanceof TypeError))throw e;console.warn(e.message)}}postRequest(e,t=(e=>this.port.postMessage(e)),n={}){if(this.options.debug&&console.debug(e),this._pendingRequests.size>=this.options.maximumRequestConcurrency)throw new m(e);return new Promise(((r,o)=>{const c=setTimeout((()=>{this._pendingRequests.has(e.requestID)&&this._pendingRequests.delete(e.requestID),o(new y(e))}),n.timeout||this.options.defaultTimeout);this._pendingRequests.set(e.requestID,(e=>{var t;clearTimeout(c),_(t=e)&&!("error"in t)?r(e):o(new v(e))})),t(e)}))}postResponse(e,t=(e=>this.port.postMessage(e))){return this.options.debug&&console.debug(e),t(e),e}}var M=(e=>(e.Connect="connect",e))(M||{}),D=(e=>(e.Ready="ready",e))(D||{});const R={readyTimeout:2e4,requestIDPrefix:"receiver-"};class P extends T{constructor(e,t){super(e,{...R,...t}),this._ready=!1,window.addEventListener("message",(e=>{this._onPublicMessage(e)}))}async ready(){if(window.parent===window)throw new Error("Receiver is currently not embedded as an iframe");this._ready=!1;const e=this.createRequestMessage(D.Ready,void 0),t=await this.postRequest(e,(e=>{window.parent.postMessage(e,"*")}),{timeout:this.options.readyTimeout});return this._ready=!0,t}_onPublicMessage(e){try{const t=h(e.data);if(f(t))if(this.options.debug&&console.debug(e.data),t.type===M.Connect){this.port=e.ports[0];const{data:data}=t;this.options={...this.options,...data,debug:this.options.debug,requestIDPrefix:this.options.requestIDPrefix,readyTimeout:this.options.readyTimeout};const n=l(t.requestID,void 0);this.postResponse(n)}else this.postResponse(d(t.requestID,void 0),(t=>{e.source.postMessage(t,e.origin)}));else this._ready||this.onMessage(e)}catch(e){if(!(e instanceof TypeError))throw e}}postFormattedRequest(e,data,t={}){if(!this._ready)throw new w("Receiver is not ready, use `ChannelReceiver.ready()` first");return this.postRequest(this.createRequestMessage(e,data),void 0,t)}}var x=(e=>(e.SetActiveSlice="setActiveSlice",e))(x||{}),A=(e=>(e.Ping="ping",e.GetLibraries="getLibraries",e.SetSliceZone="setSliceZone",e.SetSliceZoneFromSliceIDs="setSliceZoneFromSliceIDs",e.ScrollToSlice="scrollToSlice",e))(A||{});var O;A.Ping,A.GetLibraries,A.SetSliceZone,A.SetSliceZoneFromSliceIDs,A.ScrollToSlice;const j={requestIDPrefix:"api-",activeSliceAPI:!1};class L extends P{constructor(e,t){var n,r;const o=(null==t?void 0:t.debug)||/[\?&]debug=true/i.test(decodeURIComponent(window.location.search));super({[A.Ping]:(e,t)=>t.success("pong"),...e},{...j,...t,debug:o}),this[O]=async data=>await this.postFormattedRequest(x.SetActiveSlice,data),o&&(window.prismic||(window.prismic={}),(n=window.prismic).sliceSimulator||(n.sliceSimulator={}),(r=window.prismic.sliceSimulator).api||(r.api=[]),window.prismic.sliceSimulator.api.push(this))}}O=x.SetActiveSlice},293:function(e,t,n){"use strict";var r=n(294);function o(code){if(!Object.prototype.hasOwnProperty.call(c.message,code))throw new Error("invalid status code: "+code);return c.message[code]}function c(code){if("number"==typeof code)return o(code);if("string"!=typeof code)throw new TypeError("code must be a number or string");var e=parseInt(code,10);return isNaN(e)?function(e){var t=e.toLowerCase();if(!Object.prototype.hasOwnProperty.call(c.code,t))throw new Error('invalid status message: "'+e+'"');return c.code[t]}(code):o(e)}e.exports=c,c.message=r,c.code=function(e){var map={};return Object.keys(e).forEach((function(code){var t=e[code],n=Number(code);map[t.toLowerCase()]=n})),map}(r),c.codes=function(e){return Object.keys(e).map((function(code){return Number(code)}))}(r),c.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0},c.empty={204:!0,205:!0,304:!0},c.retry={502:!0,503:!0,504:!0}},294:function(e){e.exports=JSON.parse('{"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I\'m a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"}')},298:function(e,t,n){"use strict";n.d(t,"e",(function(){return N})),n.d(t,"a",(function(){return B})),n.d(t,"f",(function(){return J})),n.d(t,"c",(function(){return V})),n.d(t,"d",(function(){return W})),n.d(t,"b",(function(){return ee}));var r=function(e){return{_tag:"Left",left:e}},o=function(a){return{_tag:"Right",right:a}};Object.prototype.hasOwnProperty;var c=r,l=o,d=function(e){return"Left"===e._tag};var h,f=(h=function(e,b){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,b){e.__proto__=b}||function(e,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(e[p]=b[p])},h(e,b)},function(e,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function t(){this.constructor=e}h(e,b),e.prototype=null===b?Object.create(b):(t.prototype=b.prototype,new t)}),_=function(){return _=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e},_.apply(this,arguments)},v=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},m=c,y=function(e,t,n){return m([{value:e,context:t,message:n}])},w=l,S=function(){function e(e,t,n,r){this.name=e,this.is=t,this.validate=n,this.encode=r,this.decode=this.decode.bind(this)}return e.prototype.pipe=function(t,n){var r=this;return void 0===n&&(n="pipe(".concat(this.name,", ").concat(t.name,")")),new e(n,t.is,(function(i,e){var n=r.validate(i,e);return d(n)?n:t.validate(n.right,e)}),this.encode===I&&t.encode===I?I:function(b){return r.encode(t.encode(b))})},e.prototype.asDecoder=function(){return this},e.prototype.asEncoder=function(){return this},e.prototype.decode=function(i){return this.validate(i,[{key:"",type:this,actual:i}])},e}(),I=function(a){return a};function T(e,t,n,r){for(var o=e.length,c=Array(o+1),i=0;i<o;i++)c[i]=e[i];return c[o]={key:t,type:n,actual:r},c}function M(e,t){for(var n=t.length,i=0;i<n;i++)e.push(t[i])}var D=Object.prototype.hasOwnProperty;function R(e){return Object.keys(e).map((function(t){return"".concat(t,": ").concat(e[t].name)})).join(", ")}function P(e){for(var i=0;i<e.length;i++)if(e[i].encode!==I)return!1;return!0}function x(e){return"{ ".concat(R(e)," }")}function A(e){return"Partial<".concat(e,">")}function O(e){var t;if(E(e)){var n=e.value;if(N.is(n))return(t={})[n]=null,t}else{if("KeyofType"===e._tag)return e.keys;if(k(e)){var r=e.types.map((function(e){return O(e)}));return r.some(F.is)?void 0:Object.assign.apply(Object,v([{}],r,!1))}}}function j(base,e){for(var t=!0,n=!0,r=!C.is(base),o=0,c=e;o<c.length;o++){(u=c[o])!==base&&(t=!1),C.is(u)&&(n=!1)}if(t)return base;if(n)return e[e.length-1];for(var l={},d=0,h=e;d<h.length;d++){var u=h[d];for(var f in u)l.hasOwnProperty(f)&&!r&&u[f]===base[f]||(l[f]=u[f])}return l}function L(e){return"AnyType"===e._tag}function E(e){return"LiteralType"===e._tag}function k(e){return"UnionType"===e._tag}new(function(e){function t(){var t=e.call(this,"null",(function(u){return null===u}),(function(u,e){return t.is(u)?w(u):y(u,e)}),I)||this;return t._tag="NullType",t}return f(t,e),t}(S));var F=new(function(e){function t(){var t=e.call(this,"undefined",(function(u){return void 0===u}),(function(u,e){return t.is(u)?w(u):y(u,e)}),I)||this;return t._tag="UndefinedType",t}return f(t,e),t}(S)),N=(new(function(e){function t(){var t=e.call(this,"void",F.is,F.validate,I)||this;return t._tag="VoidType",t}return f(t,e),t}(S)),new(function(e){function t(){var t=e.call(this,"unknown",(function(e){return!0}),w,I)||this;return t._tag="UnknownType",t}return f(t,e),t}(S)),new(function(e){function t(){var t=e.call(this,"string",(function(u){return"string"==typeof u}),(function(u,e){return t.is(u)?w(u):y(u,e)}),I)||this;return t._tag="StringType",t}return f(t,e),t}(S))),Z=new(function(e){function t(){var t=e.call(this,"number",(function(u){return"number"==typeof u}),(function(u,e){return t.is(u)?w(u):y(u,e)}),I)||this;return t._tag="NumberType",t}return f(t,e),t}(S)),$=(new(function(e){function t(){var t=e.call(this,"bigint",(function(u){return"bigint"==typeof u}),(function(u,e){return t.is(u)?w(u):y(u,e)}),I)||this;return t._tag="BigIntType",t}return f(t,e),t}(S)),new(function(e){function t(){var t=e.call(this,"boolean",(function(u){return"boolean"==typeof u}),(function(u,e){return t.is(u)?w(u):y(u,e)}),I)||this;return t._tag="BooleanType",t}return f(t,e),t}(S)),new(function(e){function t(){var t=e.call(this,"UnknownArray",Array.isArray,(function(u,e){return t.is(u)?w(u):y(u,e)}),I)||this;return t._tag="AnyArrayType",t}return f(t,e),t}(S))),C=new(function(e){function t(){var t=e.call(this,"UnknownRecord",(function(u){var s=Object.prototype.toString.call(u);return"[object Object]"===s||"[object Window]"===s}),(function(u,e){return t.is(u)?w(u):y(u,e)}),I)||this;return t._tag="AnyDictionaryType",t}return f(t,e),t}(S));!function(e){function t(t,n,r,o,c){var l=e.call(this,t,n,r,o)||this;return l.value=c,l._tag="LiteralType",l}f(t,e)}(S);!function(e){function t(t,n,r,o,c){var l=e.call(this,t,n,r,o)||this;return l.keys=c,l._tag="KeyofType",l}f(t,e)}(S);var U=function(e){function t(t,n,r,o,c,l){var d=e.call(this,t,n,r,o)||this;return d.type=c,d.predicate=l,d._tag="RefinementType",d}return f(t,e),t}(S);te(Z,(function(e){return Number.isInteger(e)}),"Int");var z=function(e){function t(t,n,r,o,c){var l=e.call(this,t,n,r,o)||this;return l.runDefinition=c,l._tag="RecursiveType",l}return f(t,e),t}(S);Object.defineProperty(z.prototype,"type",{get:function(){return this.runDefinition()},enumerable:!0,configurable:!0});var H=function(e){function t(t,n,r,o,c){var l=e.call(this,t,n,r,o)||this;return l.type=c,l._tag="ArrayType",l}return f(t,e),t}(S);function B(e,t){return void 0===t&&(t="Array<".concat(e.name,">")),new H(t,(function(u){return $.is(u)&&u.every(e.is)}),(function(u,t){var n=$.validate(u,t);if(d(n))return n;for(var r=n.right,o=r.length,c=r,l=[],i=0;i<o;i++){var h=r[i],f=e.validate(h,T(t,String(i),e,h));if(d(f))M(l,f.left);else{var _=f.right;_!==h&&(c===r&&(c=r.slice()),c[i]=_)}}return l.length>0?m(l):w(c)}),e.encode===I?I:function(a){return a.map(e.encode)},e)}var G=function(e){function t(t,n,r,o,c){var l=e.call(this,t,n,r,o)||this;return l.props=c,l._tag="InterfaceType",l}return f(t,e),t}(S);function J(e,t){void 0===t&&(t=x(e));var n=Object.keys(e),r=n.map((function(t){return e[t]})),o=n.length;return new G(t,(function(u){if(C.is(u)){for(var i=0;i<o;i++){var e=n[i],t=u[e];if(void 0===t&&!D.call(u,e)||!r[i].is(t))return!1}return!0}return!1}),(function(u,e){var t=C.validate(u,e);if(d(t))return t;for(var c=t.right,a=c,l=[],i=0;i<o;i++){var h=n[i],f=a[h],v=r[i],y=v.validate(f,T(e,h,v,f));if(d(y))M(l,y.left);else{var S=y.right;(S!==f||void 0===S&&!D.call(a,h))&&(a===c&&(a=_({},c)),a[h]=S)}}return l.length>0?m(l):w(a)}),P(r)?I:function(a){for(var s=_({},a),i=0;i<o;i++){var e=n[i],t=r[i].encode;t!==I&&(s[e]=t(a[e]))}return s},e)}var K=function(e){function t(t,n,r,o,c){var l=e.call(this,t,n,r,o)||this;return l.props=c,l._tag="PartialType",l}return f(t,e),t}(S);function V(e,t){void 0===t&&(t=A(x(e)));var n=Object.keys(e),r=n.map((function(t){return e[t]})),o=n.length;return new K(t,(function(u){if(C.is(u)){for(var i=0;i<o;i++){var t=n[i],r=u[t];if(void 0!==r&&!e[t].is(r))return!1}return!0}return!1}),(function(u,t){var r=C.validate(u,t);if(d(r))return r;for(var c=r.right,a=c,l=[],i=0;i<o;i++){var h=n[i],f=a[h],v=e[h],y=v.validate(f,T(t,h,v,f));if(d(y))void 0!==f&&M(l,y.left);else{var S=y.right;S!==f&&(a===c&&(a=_({},c)),a[h]=S)}}return l.length>0?m(l):w(a)}),P(r)?I:function(a){for(var s=_({},a),i=0;i<o;i++){var e=n[i],t=a[e];void 0!==t&&(s[e]=r[i].encode(t))}return s},e)}var Y=function(e){function t(t,n,r,o,c,l){var d=e.call(this,t,n,r,o)||this;return d.domain=c,d.codomain=l,d._tag="DictionaryType",d}return f(t,e),t}(S);function W(e,t,n){var r=O(e);return r?function(e,t,n,r){void 0===r&&(r="{ [K in ".concat(t.name,"]: ").concat(n.name," }"));var o=e.length;return new Y(r,(function(u){return C.is(u)&&e.every((function(e){return n.is(u[e])}))}),(function(u,t){var r=C.validate(u,t);if(d(r))return r;for(var c=r.right,a={},l=[],h=!1,i=0;i<o;i++){var f=e[i],_=c[f],v=n.validate(_,T(t,f,n,_));if(d(v))M(l,v.left);else{var y=v.right;h=h||y!==_,a[f]=y}}return l.length>0?m(l):w(h||Object.keys(c).length!==o?a:c)}),n.encode===I?I:function(a){for(var s={},i=0;i<o;i++){var t=e[i];s[t]=n.encode(a[t])}return s},t,n)}(Object.keys(r),e,t,n):function(e,t,n){return void 0===n&&(n="{ [K in ".concat(e.name,"]: ").concat(t.name," }")),new Y(n,(function(u){return C.is(u)?Object.keys(u).every((function(n){return e.is(n)&&t.is(u[n])})):L(t)&&Array.isArray(u)}),(function(u,n){if(C.is(u)){for(var a={},r=[],o=Object.keys(u),c=o.length,l=!1,i=0;i<c;i++){var h=o[i],f=u[h],_=e.validate(h,T(n,h,e,h));if(d(_))M(r,_.left);else{var v=_.right;l=l||v!==h,h=v;var S=t.validate(f,T(n,h,t,f));if(d(S))M(r,S.left);else{var I=S.right;l=l||I!==f,a[h]=I}}}return r.length>0?m(r):w(l?a:u)}return L(t)&&Array.isArray(u)?w(u):y(u,n)}),e.encode===I&&t.encode===I?I:function(a){for(var s={},n=Object.keys(a),r=n.length,i=0;i<r;i++){var o=n[i];s[String(e.encode(o))]=t.encode(a[o])}return s},e,t)}(e,t,n)}var X=function(e){function t(t,n,r,o,c){var l=e.call(this,t,n,r,o)||this;return l.types=c,l._tag="UnionType",l}return f(t,e),t}(S);var Q=function(e){function t(t,n,r,o,c){var l=e.call(this,t,n,r,o)||this;return l.types=c,l._tag="IntersectionType",l}return f(t,e),t}(S);function ee(e,t){void 0===t&&(t="(".concat(e.map((function(e){return e.name})).join(" & "),")"));var n=e.length;return new Q(t,(function(u){return e.every((function(e){return e.is(u)}))}),0===e.length?w:function(u,t){for(var r=[],o=[],i=0;i<n;i++){var c=e[i],l=c.validate(u,T(t,String(i),c,u));d(l)?M(o,l.left):r.push(l.right)}return o.length>0?m(o):w(j(u,r))},0===e.length?I:function(a){return j(a,e.map((function(e){return e.encode(a)})))},e)}!function(e){function t(t,n,r,o,c){var l=e.call(this,t,n,r,o)||this;return l.types=c,l._tag="TupleType",l}f(t,e)}(S);!function(e){function t(t,n,r,o,c){var l=e.call(this,t,n,r,o)||this;return l.type=c,l._tag="ReadonlyType",l}f(t,e)}(S);!function(e){function t(t,n,r,o,c){var l=e.call(this,t,n,r,o)||this;return l.type=c,l._tag="ReadonlyArrayType",l}f(t,e)}(S);!function(e){function t(t,n,r,o,c){var l=e.call(this,t,n,r,o)||this;return l.type=c,l._tag="ExactType",l}f(t,e)}(S);new(function(e){function t(){var t=e.call(this,"Function",(function(u){return"function"==typeof u}),(function(u,e){return t.is(u)?w(u):y(u,e)}),I)||this;return t._tag="FunctionType",t}return f(t,e),t}(S)),function(e){function t(t,n,r,o,c,l){var d=e.call(this,t,n,r,o,c)||this;return d.tag=l,d}f(t,e)}(X),new(function(e){function t(){var t=e.call(this,"never",(function(e){return!1}),(function(u,e){return y(u,e)}),(function(){throw new Error("cannot encode never")}))||this;return t._tag="NeverType",t}return f(t,e),t}(S)),new(function(e){function t(){var t=e.call(this,"any",(function(e){return!0}),w,I)||this;return t._tag="AnyType",t}return f(t,e),t}(S)),new(function(e){function t(){var t=e.call(this,"object",(function(u){return null!==u&&"object"==typeof u}),(function(u,e){return t.is(u)?w(u):y(u,e)}),I)||this;return t._tag="ObjectType",t}return f(t,e),t}(S));function te(e,t,n){var r;return void 0===n&&(n="(".concat(e.name," | ").concat((r=t).displayName||r.name||"<function".concat(r.length,">"),")")),new U(n,(function(u){return e.is(u)&&t(u)}),(function(i,n){var r=e.validate(i,n);if(d(r))return r;var a=r.right;return t(a)?w(a):y(a,n)}),e.encode,e,t)}te(Z,Number.isInteger,"Integer"),function(e){function t(t,n,r,o,c){var l=e.call(this,t,n,r,o)||this;return l.props=c,l._tag="StrictType",l}f(t,e)}(S)}}]);